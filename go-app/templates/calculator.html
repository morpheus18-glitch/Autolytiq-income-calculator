{{define "calculator-content"}}
<div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <!-- Hero -->
    <div class="text-center mb-8">
        <div class="inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300 text-sm font-medium mb-4">
            <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
            </svg>
            100% Free - No Signup
        </div>
        <h1 class="text-3xl sm:text-4xl font-bold mb-3">
            Income <span class="text-primary-500">Calculator</span>
        </h1>
        <p class="text-slate-600 dark:text-slate-400 max-w-xl mx-auto">
            Calculate your projected annual salary from your year-to-date earnings
        </p>
    </div>

    <!-- Calculator Card -->
    <div class="bg-white dark:bg-slate-800 rounded-2xl shadow-xl border border-slate-200 dark:border-slate-700 overflow-hidden">
        <div class="p-6 sm:p-8">
            <form hx-post="/api/calculate-income" hx-target="#results" hx-swap="innerHTML" hx-indicator="#loading">
                <div class="grid sm:grid-cols-3 gap-4 mb-6">
                    <!-- Start Date -->
                    <div>
                        <label class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">
                            Job Start Date
                        </label>
                        <input
                            type="date"
                            name="start_date"
                            value="{{.DefaultStartDate}}"
                            class="w-full px-4 py-3 rounded-xl border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors"
                            required
                        >
                    </div>

                    <!-- YTD Income -->
                    <div>
                        <label class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">
                            YTD Gross Income
                        </label>
                        <div class="relative">
                            <span class="absolute left-4 top-1/2 -translate-y-1/2 text-slate-500">$</span>
                            <input
                                type="text"
                                name="ytd_income"
                                id="ytd_income"
                                placeholder="25,000"
                                inputmode="decimal"
                                class="w-full pl-8 pr-4 py-3 rounded-xl border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors"
                                required
                            >
                        </div>
                    </div>

                    <!-- Check Date -->
                    <div>
                        <label class="block text-sm font-medium text-slate-700 dark:text-slate-300 mb-2">
                            Paystub Date
                        </label>
                        <input
                            type="date"
                            name="check_date"
                            value="{{.Today}}"
                            class="w-full px-4 py-3 rounded-xl border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-900 focus:ring-2 focus:ring-primary-500 focus:border-primary-500 transition-colors"
                            required
                        >
                    </div>
                </div>

                <button
                    type="submit"
                    class="w-full py-4 px-6 bg-primary-500 hover:bg-primary-600 text-white font-semibold rounded-xl shadow-lg shadow-primary-500/25 hover:shadow-xl hover:shadow-primary-500/30 transition-all flex items-center justify-center gap-2"
                >
                    <span>Calculate My Income</span>
                    <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"/>
                    </svg>
                </button>
            </form>

            <!-- Loading Indicator -->
            <div id="loading" class="htmx-indicator flex items-center justify-center py-8">
                <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"></div>
            </div>

            <!-- Results Container -->
            <div id="results" class="mt-6"></div>
        </div>
    </div>

    <!-- How It Works -->
    <div class="mt-12 grid sm:grid-cols-3 gap-6 text-center">
        <div class="p-4">
            <div class="w-12 h-12 rounded-full bg-primary-100 dark:bg-primary-900/50 text-primary-600 dark:text-primary-400 flex items-center justify-center text-xl font-bold mx-auto mb-3">1</div>
            <h3 class="font-semibold mb-1">Enter YTD Income</h3>
            <p class="text-sm text-slate-600 dark:text-slate-400">Find your gross YTD on your paystub</p>
        </div>
        <div class="p-4">
            <div class="w-12 h-12 rounded-full bg-primary-100 dark:bg-primary-900/50 text-primary-600 dark:text-primary-400 flex items-center justify-center text-xl font-bold mx-auto mb-3">2</div>
            <h3 class="font-semibold mb-1">Set Your Dates</h3>
            <p class="text-sm text-slate-600 dark:text-slate-400">When you started & paystub date</p>
        </div>
        <div class="p-4">
            <div class="w-12 h-12 rounded-full bg-primary-100 dark:bg-primary-900/50 text-primary-600 dark:text-primary-400 flex items-center justify-center text-xl font-bold mx-auto mb-3">3</div>
            <h3 class="font-semibold mb-1">Get Results</h3>
            <p class="text-sm text-slate-600 dark:text-slate-400">See your projected annual income</p>
        </div>
    </div>

    <!-- Quick Links -->
    <div class="mt-12 text-center">
        <p class="text-sm text-slate-500 dark:text-slate-400 mb-4">More Tools</p>
        <div class="flex flex-wrap justify-center gap-3">
            <a href="/smart-money" class="px-4 py-2 rounded-lg bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700 text-sm font-medium transition-colors">Budget Planner</a>
            <a href="/housing" class="px-4 py-2 rounded-lg bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700 text-sm font-medium transition-colors">Housing Calculator</a>
            <a href="/auto" class="px-4 py-2 rounded-lg bg-slate-100 dark:bg-slate-800 hover:bg-slate-200 dark:hover:bg-slate-700 text-sm font-medium transition-colors">Auto Calculator</a>
        </div>
    </div>
</div>

<script>
    // Format money input with commas
    document.getElementById('ytd_income')?.addEventListener('input', function(e) {
        let value = e.target.value.replace(/[^0-9.]/g, '');
        const parts = value.split('.');
        if (parts[0]) {
            parts[0] = parseInt(parts[0]).toLocaleString();
        }
        e.target.value = parts.join('.');
    });
</script>
{{end}}
