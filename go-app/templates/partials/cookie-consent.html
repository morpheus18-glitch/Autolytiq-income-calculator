{{define "cookie-consent"}}
<!-- Cookie Consent Banner -->
<div x-data="cookieConsent()" x-show="show" x-cloak
     class="fixed bottom-0 left-0 right-0 z-50 p-4 md:p-6 bg-white dark:bg-slate-900 border-t border-slate-200 dark:border-slate-700 shadow-2xl"
     x-transition:enter="transition ease-out duration-300"
     x-transition:enter-start="translate-y-full"
     x-transition:enter-end="translate-y-0"
     x-transition:leave="transition ease-in duration-200"
     x-transition:leave-start="translate-y-0"
     x-transition:leave-end="translate-y-full">
    <div class="max-w-7xl mx-auto">
        <div class="flex flex-col sm:flex-row items-start sm:items-center gap-4">
            <div class="flex-1">
                <p class="text-sm text-slate-600 dark:text-slate-400">
                    We use cookies for analytics to improve your experience. No financial data is ever tracked.
                    <a href="/privacy" class="text-primary-500 hover:underline">Privacy Policy</a>
                </p>
            </div>
            <div class="flex items-center gap-3 shrink-0">
                <button @click="decline()" class="px-4 py-2 text-sm font-medium text-slate-600 dark:text-slate-400 hover:text-slate-900 dark:hover:text-white border border-slate-200 dark:border-slate-700 rounded-lg transition-colors">
                    Decline
                </button>
                <button @click="accept()" class="px-4 py-2 text-sm font-medium text-white bg-primary-500 hover:bg-primary-600 rounded-lg transition-colors">
                    Accept All
                </button>
            </div>
        </div>
    </div>
</div>
<script>
function cookieConsent() {
    return {
        show: false,
        init() {
            if (!localStorage.getItem('cookie-consent')) {
                setTimeout(() => { this.show = true; }, 1500);
            }
        },
        accept() {
            localStorage.setItem('cookie-consent', 'accepted');
            this.show = false;
            if (typeof gtag === 'function') {
                gtag('consent', 'update', { analytics_storage: 'granted' });
            }
        },
        decline() {
            localStorage.setItem('cookie-consent', 'declined');
            this.show = false;
            if (typeof gtag === 'function') {
                gtag('consent', 'update', { analytics_storage: 'denied' });
            }
        }
    };
}
</script>
{{end}}
